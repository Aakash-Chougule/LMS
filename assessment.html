<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>LMS - Assessment</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <style>
    body { margin: 0; font-family: Arial, sans-serif; background: #f8f9fa; }
    nav { background: #2c3e50; color: #fff; display: flex; justify-content: space-between; align-items: center; padding: 15px 40px; }
    nav .logo { font-size: 20px; font-weight: bold; }
    nav .user { font-size: 16px; font-weight: bold; }
    nav ul { list-style: none; display: flex; gap: 20px; margin: 0; padding: 0; }
    nav ul li a { color: #fff; text-decoration: none; font-weight: bold; }
    nav ul li a:hover { color: #1abc9c; }
    .quiz-container { max-width: 800px; margin: 40px auto; background: #fff; padding: 30px; border-radius: 10px; box-shadow: 0 4px 12px rgba(0,0,0,0.1); }
    h1 { margin-bottom: 20px; text-align: center; }
    .question { margin-bottom: 20px; text-align: left; }
    button { padding: 12px 20px; border: none; border-radius: 6px; background: #1abc9c; color: #fff; cursor: pointer; margin: 10px; }
    button:hover { background: #16a085; }
    #result { margin-top: 20px; font-size: 18px; font-weight: bold; text-align: center; }
    
    /* Certificate Preview Styling */
    #certificatePreview {
      margin-top: 30px;
      display: none;
      border: 5px solid #2c3e50;
      padding: 40px;
      text-align: center;
      background: #fffdf5;
      border-radius: 12px;
      box-shadow: 0 4px 20px rgba(0,0,0,0.2);
    }
    #certificatePreview h2 {
      font-size: 28px;
      margin-bottom: 10px;
      color: #2c3e50;
      text-transform: uppercase;
      border-bottom: 2px solid #ccc;
      display: inline-block;
      padding-bottom: 5px;
    }
    #certificatePreview h3 {
      font-size: 22px;
      margin: 15px 0;
      color: #1a5276;
    }
    #certificatePreview p {
      font-size: 18px;
      margin: 8px 0;
    }
    #certificatePreview .footer {
      margin-top: 30px;
      font-style: italic;
      color: #555;
    }
  </style>
</head>
<body>
  <nav>
    <div class="logo">LMS Assessment</div>
    <ul>
      <li><a href="index.html">üè† Home</a></li>
      <li><a href="leaderboard.html">üèÜ Leaderboard</a></li>
    </ul>
    <div class="user" id="studentName">Welcome, Student</div>
  </nav>

  <div class="quiz-container">
    <h1>Final Assessment</h1>

    <div id="quiz">
      <div class="question">
        <p>Q1: HTML stands for?</p>
        <input type="radio" name="q1" value="a"> Hyper Text Markup Language<br>
        <input type="radio" name="q1" value="b"> High Tech Machine Learning<br>
        <input type="radio" name="q1" value="c"> Hyperlinks and Text Markup Language<br>
        <input type="radio" name="q1" value="d"> None of the above<br>
      </div>
      <div class="question">
        <p>Q2: Which tag is used to include JavaScript code?</p>
        <input type="radio" name="q2" value="a">&lt;java&gt;<br>
        <input type="radio" name="q2" value="b">&lt;js&gt;<br>
        <input type="radio" name="q2" value="c">&lt;script&gt;<br>
        <input type="radio" name="q2" value="d">&lt;code&gt;<br>
      </div>
      <div class="question">
        <p>Q3: CSS is used for?</p>
        <input type="radio" name="q3" value="a"> Styling web pages<br>
        <input type="radio" name="q3" value="b"> Structuring data<br>
        <input type="radio" name="q3" value="c"> Database management<br>
        <input type="radio" name="q3" value="d"> None<br>
      </div>
      <div class="question">
        <p>Q4: Which property is used to change text color in CSS?</p>
        <input type="radio" name="q4" value="a"> font-color<br>
        <input type="radio" name="q4" value="b"> color<br>
        <input type="radio" name="q4" value="c"> text-style<br>
        <input type="radio" name="q4" value="d"> background-color<br>
      </div>
      <div class="question">
        <p>Q5: Which of the following is a JavaScript framework?</p>
        <input type="radio" name="q5" value="a"> React<br>
        <input type="radio" name="q5" value="b"> Django<br>
        <input type="radio" name="q5" value="c"> Flask<br>
        <input type="radio" name="q5" value="d"> Laravel<br>
      </div>
      <div class="question">
        <p>Q6: In JavaScript, which symbol is used for comments?</p>
        <input type="radio" name="q6" value="a"> #comment<br>
        <input type="radio" name="q6" value="b"> // comment<br>
        <input type="radio" name="q6" value="c"> &lt;!-- comment --&gt;<br>
        <input type="radio" name="q6" value="d"> /* comment */<br>
      </div>
      <div class="question">
        <p>Q7: Which attribute is used in HTML to add an image?</p>
        <input type="radio" name="q7" value="a"> link<br>
        <input type="radio" name="q7" value="b"> src<br>
        <input type="radio" name="q7" value="c"> href<br>
        <input type="radio" name="q7" value="d"> alt<br>
      </div>
      <div class="question">
        <p>Q8: Which HTML tag is used for the largest heading?</p>
        <input type="radio" name="q8" value="a">&lt;h1&gt;<br>
        <input type="radio" name="q8" value="b">&lt;h3&gt;<br>
        <input type="radio" name="q8" value="c">&lt;h5&gt;<br>
        <input type="radio" name="q8" value="d">&lt;head&gt;<br>
      </div>
      <div class="question">
        <p>Q9: Which of the following is NOT a programming language?</p>
        <input type="radio" name="q9" value="a"> Python<br>
        <input type="radio" name="q9" value="b"> Java<br>
        <input type="radio" name="q9" value="c"> HTML<br>
        <input type="radio" name="q9" value="d"> C++<br>
      </div>
      <div class="question">
        <p>Q10: Which method is used to print something in JavaScript?</p>
        <input type="radio" name="q10" value="a"> console.log()<br>
        <input type="radio" name="q10" value="b"> print()<br>
        <input type="radio" name="q10" value="c"> echo()<br>
        <input type="radio" name="q10" value="d"> log()<br>
      </div>
      <button onclick="submitQuiz()">Submit</button>
    </div>

    <p id="result"></p>
    <button onclick="previewCertificate()" id="previewBtn" style="display:none;">Preview Certificate</button>
    <button onclick="downloadCertificate()" id="certBtn" style="display:none;">Download Certificate</button>

    <div id="certificatePreview"></div>
  </div>

  <script>
    const studentName = localStorage.getItem("studentName") || "Student";
    const courseName = localStorage.getItem("selectedCourse") || "Course";
    document.getElementById("studentName").textContent = "Welcome, " + studentName;

    let score = 0;

    function submitQuiz() {
      score = 0;

      // Correct answers
      const answers = {
        q1: "a",
        q2: "c",
        q3: "a",
        q4: "b",
        q5: "a",
        q6: "b",
        q7: "b",
        q8: "a",
        q9: "c",
        q10: "a"
      };

      for (let q in answers) {
        if (document.querySelector(`input[name="${q}"]:checked`)?.value === answers[q]) {
          score++;
        }
      }

      // Show congratulation message
      document.getElementById("quiz").style.display = "none";
      document.getElementById("result").textContent =
        "üéâ Congratulations " + studentName + "! You successfully completed the course: " + courseName + " with a score of " + score + "/10";

      // Show buttons
      document.getElementById("previewBtn").style.display = "inline-block";
      document.getElementById("certBtn").style.display = "inline-block";

      // Save result to leaderboard
      let leaderboard = JSON.parse(localStorage.getItem("leaderboard")) || [];
      leaderboard.push({ name: studentName, score: score, course: courseName });
      localStorage.setItem("leaderboard", JSON.stringify(leaderboard));
    }

    function previewCertificate() {
      let preview = document.getElementById("certificatePreview");
      preview.style.display = "block";
      preview.innerHTML = `
        <h2>Certificate of Completion</h2>
        <p>This is to certify that</p>
        <h3>${studentName}</h3>
        <p>has successfully completed the course:</p>
        <h3>${courseName}</h3>
        <p>with a score of <b>${score}/10</b></p>
        <div class="footer">Date: ${new Date().toLocaleDateString()}<br>Learning Management System</div>
      `;
    }

    async function downloadCertificate() {
      const { jsPDF } = window.jspdf;
      const doc = new jsPDF();

      doc.setFontSize(22);
      doc.text("Certificate of Completion", 60, 40);

      doc.setFontSize(16);
      doc.text("This is to certify that", 20, 70);
      doc.setFontSize(20);
      doc.text(studentName, 20, 90);
      doc.setFontSize(16);
      doc.text("has successfully completed the course:", 20, 110);
      doc.text(courseName, 20, 130);
      doc.text("with a score of " + score + "/10", 20, 150);

      doc.setFontSize(12);
      doc.text("Date: " + new Date().toLocaleDateString(), 20, 170);
      doc.text("Learning Management System", 20, 180);

      doc.save("certificate.pdf");
    }
  </script>
</body>
</html>
